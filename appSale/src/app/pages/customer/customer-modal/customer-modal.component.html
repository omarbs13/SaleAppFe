<h1 mat-dialog-title>Clientes</h1>
<hr>
<div mat-dialog-content>
  <form [formGroup]="customerForm" (ngSubmit)="onSubmit()" autocomplete="off">
    <table style="width:100%;">
      <tr>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label for="customerName">Nombre del cliente</mat-label>
              <input matInput type="text" formControlName="customerName" maxlength="50">
            </mat-form-field>
            <div *ngIf="customerName?.invalid && (customerName?.dirty || customerName?.touched)" class="text-danger">
              <div *ngIf="customerName?.errors?.['required']">
                El nombre es requerido.
              </div>
            </div>
          </div>
        </td>
        <td style="width:10%;"></td>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label for="email">Email</mat-label>
              <input matInput type="text" formControlName="email" maxlength="50">
            </mat-form-field>

            <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="text-danger">
              <div *ngIf="email?.errors?.['required']">
                El email es requerido.
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label for="rfc">RFC</mat-label>
              <input matInput type="text" formControlName="rfc" maxlength="13" style="text-transform: uppercase;" (blur)="toUpperCase()" >
            </mat-form-field>
            <div *ngIf="rfc?.invalid && (rfc?.dirty || rfc?.touched)" class="text-danger">
              <div *ngIf="rfc?.errors?.['required']">
                El RFC es requerido.
              </div>
            </div>
            <div *ngIf="rfc?.invalid && (rfc?.dirty || rfc?.touched)" class="text-danger">
              <div *ngIf="rfc?.errors?.['pattern']">
                El RFC no tiene el formato correcto.
              </div>
            </div>
          </div>
        </td>
        <td style="width:10%;"></td>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label for="phone">Teléfono</mat-label>
              <input matInput type="tel" formControlName="phone" maxlength="12">
            </mat-form-field>

            <div *ngIf="phone?.invalid && (phone?.dirty || phone?.touched)" class="text-danger">
              <div *ngIf="phone?.errors?.['required']">
                El teléfono es requerido.
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label>Estado</mat-label>
              <mat-select required="" formControlName="state" #selectList (selectionChange)="getCities($event.value)">
                <mat-option *ngFor="let item of states" [value]="item.stateId" >{{item.stateName}}</mat-option>
              </mat-select>
            </mat-form-field>
            <div *ngIf="state?.invalid && (state?.dirty || state?.touched)" class="text-danger">
              <div *ngIf="state?.errors?.['required']">
                El estado es requerido.
              </div>
            </div>
          </div>
        </td>
        <td style="width:10%;"></td>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label>Ciudad</mat-label>
              <mat-select required="" formControlName="city">
                <mat-option *ngFor="let item of cities" [value]="item.cityId" >{{item.cityName}}</mat-option>
              </mat-select>
            </mat-form-field>
            <div *ngIf="city?.invalid && (city?.dirty || city?.touched)" class="text-danger">
              <div *ngIf="city?.errors?.['required']">
                La ciudad es requerida.
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td style="width:40%;">
          <div class="form-group">
            <mat-form-field appearance="legacy">
              <mat-label for="zipCode">Código postal</mat-label>
              <input matInput type="text" formControlName="zipCode" maxlength="5">
            </mat-form-field>
            <div *ngIf="zipCode?.invalid && (zipCode?.dirty || zipCode?.touched)" class="text-danger">
              <div *ngIf="zipCode?.errors?.['required']">
                El Código postal es requerido.
              </div>
            </div>
          </div>
        </td>
        <td style="width:10%;"></td>
        <td style="width:40%;">  
          <div class="form-group">
          <mat-form-field appearance="legacy">
            <mat-label for="balance">Saldo</mat-label>
            <input matInput type="number" formControlName="balance" maxlength="50">
          </mat-form-field>
        </div>
        </td>
      </tr>
      <tr>
        <td style="width:100%;" colspan="3">
          <div class="form-group">
            <mat-form-field appearance="legacy" style="width:100% ;">
              <mat-label for="street">Calle</mat-label>
              <input matInput type="text" formControlName="street" maxlength="50">
            </mat-form-field>
            <div *ngIf="street?.invalid && (street?.dirty || street?.touched)" class="text-danger">
              <div *ngIf="street?.errors?.['required']">
                La calle es requerida.
              </div>
            </div>
          </div>
        </td>
        
      </tr>
    </table>
    <hr>
    <div style="text-align: right;">
      <button type="button" class="btn btn-danger" (click)="onCancel()">Cancelar</button>&nbsp; &nbsp;
      <button class="btn btn-success" [disabled]="!customerForm.valid">Guardar</button>
    </div>

  </form>
</div>